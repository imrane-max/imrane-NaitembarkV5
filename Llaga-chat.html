<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Llaga AI - Real Llama Model | Imrane's Portfolio</title>
    <!-- Puter.js - Free Llama API (No API Key Required!) -->
    <script src="https://js.puter.com/v2/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: linear-gradient(145deg, #1e1e2e, #252540);
            border-radius: 24px;
            padding: 30px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 0 40px rgba(102, 126, 234, 0.1);
            animation: slideInUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            max-height: 95vh;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 8px 35px rgba(102, 126, 234, 0.6); }
        }

        h1 {
            color: #fff;
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            color: #8b8b9e;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .model-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(102, 126, 234, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: #667eea;
            margin-left: 8px;
        }

        .model-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .info-banner {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
            border-left: 4px solid #667eea;
            padding: 14px 18px;
            border-radius: 12px;
            font-size: 13px;
            color: #a5b4fc;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-banner img {
            width: 40px;
            height: 40px;
            border-radius: 10px;
        }

        .chat-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 20px;
            height: 420px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chat-box::-webkit-scrollbar {
            width: 6px;
        }

        .chat-box::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .chat-box::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.5);
            border-radius: 3px;
        }

        .message {
            margin-bottom: 16px;
            animation: slideInUp 0.3s ease;
        }

        .user-msg {
            display: flex;
            justify-content: flex-end;
            align-items: flex-start;
            gap: 10px;
        }

        .user-msg .text {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 14px 18px;
            border-radius: 20px 20px 6px 20px;
            max-width: 75%;
            word-wrap: break-word;
            font-size: 14px;
            line-height: 1.5;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .ai-msg {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .ai-msg .text {
            background: rgba(255, 255, 255, 0.08);
            color: #e2e8f0;
            padding: 14px 18px;
            border-radius: 20px 20px 20px 6px;
            max-width: 75%;
            word-wrap: break-word;
            font-size: 14px;
            line-height: 1.6;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ai-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .input-section {
            display: flex;
            gap: 12px;
        }

        input {
            flex: 1;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 14px;
            font-size: 15px;
            color: #fff;
            transition: all 0.3s ease;
        }

        input::placeholder {
            color: #6b7280;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
            background: rgba(255, 255, 255, 0.1);
        }

        .send-btn {
            padding: 16px 28px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .send-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .send-btn:active:not(:disabled) {
            transform: scale(0.98);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 8px 0;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-8px); opacity: 1; }
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #8b8b9e;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #f59e0b;
        }

        .status-dot.ready {
            background: #4ade80;
            box-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .suggestion-chip {
            padding: 8px 14px;
            background: rgba(102, 126, 234, 0.15);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            color: #a5b4fc;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .suggestion-chip:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 600px) {
            .container { padding: 20px; }
            h1 { font-size: 22px; }
            .chat-box { height: 350px; }
            .suggestions { display: none; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">‚Üê Back to Portfolio</a>
    
    <div class="container">
        <div class="header">
            <div class="logo">ü¶ô</div>
            <div>
                <h1>Llaga AI</h1>
                <span class="model-badge">Llama 3.3 70B</span>
            </div>
        </div>
        <p class="subtitle">Real AI powered by Meta's Llama model ‚Ä¢ Free & Unlimited ‚Ä¢ Imrane's Portfolio</p>

        <div class="info-banner">
            <span style="font-size: 24px;">üß†</span>
            <div>
                <strong>Real Llama AI!</strong> This chatbot uses Meta's Llama 3.3 70B model via Puter.js - completely free, no API key needed!
            </div>
        </div>

        <div class="status-bar">
            <div class="status-indicator">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Connecting to Llama...</span>
            </div>
            <div>Model: <strong>Llama 3.3 70B</strong></div>
        </div>

        <div class="suggestions" id="suggestions">
            <div class="suggestion-chip" onclick="askSuggestion('What projects has Imrane built?')">üíª Projects</div>
            <div class="suggestion-chip" onclick="askSuggestion('What are Imrane\'s skills?')">‚ö° Skills</div>
            <div class="suggestion-chip" onclick="askSuggestion('Tell me about the AI/ML work')">ü§ñ AI/ML</div>
            <div class="suggestion-chip" onclick="askSuggestion('What games can I play?')">üéÆ Games</div>
            <div class="suggestion-chip" onclick="askSuggestion('How can I contact Imrane?')">üìß Contact</div>
        </div>

        <div class="chat-box" id="chatBox"></div>

        <div class="input-section">
            <input 
                type="text" 
                id="userInput" 
                placeholder="Ask me anything about Imrane's portfolio..." 
                onkeypress="handleKeyPress(event)"
            >
            <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                <span>Send</span>
                <span>‚Üí</span>
            </button>
        </div>
    </div>

    <script>
        let chatReady = false;
        let conversationHistory = [];

        // Portfolio context for Llama
        const systemPrompt = `You are Llaga, a friendly AI assistant for Imrane Naitembark's portfolio website. You have knowledge about:

PORTFOLIO OWNER: Imrane Naitembark

PROJECTS (12+ games and apps):
- Snake Game: Classic snake with smooth animations
- 2048: Number puzzle game with swipe controls
- Rock Paper Scissors AI: Game with AI opponent that learns
- Memory Match: Card matching game with difficulty levels
- Reaction Time Test: Speed testing game
- Tic Tac Toe: With unbeatable AI using minimax
- ML Digit Classifier: Draw digits, neural network recognizes them
- ML RPS Learner: AI that learns your patterns
- Fragime: FPS game built in Godot Engine
- Hamood: Platform game in Godot Engine

TECHNOLOGIES:
- Frontend: JavaScript, HTML5, CSS3, Canvas API
- Backend: Python, Flask
- Game Dev: Godot Engine, GDScript
- AI/ML: TensorFlow.js, Neural Networks, TF-IDF, Pattern Recognition
- Tools: Git, VS Code, localStorage for data persistence

SPECIAL FEATURES:
- Dark/Light mode theme switching
- Smooth CSS animations
- Responsive design for all devices
- High score tracking with localStorage
- Multiple AI-powered chatbots

CONTACT: imrane2015su@gmail.com

INSTRUCTIONS:
- Be friendly, helpful, and enthusiastic
- Keep responses concise (under 150 words)
- Use emojis occasionally to be engaging
- Focus on Imrane's portfolio and skills
- If asked about something not in the portfolio, politely redirect to relevant topics`;

        // Initialize
        window.addEventListener('load', async () => {
            addMessage('ai', "ü¶ô Hi! I'm Llaga, powered by Meta's Llama 3.3 70B model! I'm Imrane's AI assistant - ask me anything about the projects, skills, games, or AI/ML work!");
            
            // Test Puter.js connection
            try {
                document.getElementById('statusDot').classList.add('ready');
                document.getElementById('statusText').textContent = 'Llama Ready ‚úì';
                chatReady = true;
            } catch (e) {
                document.getElementById('statusText').textContent = 'Using fallback mode';
                chatReady = true;
            }
        });

        function addMessage(sender, text, isStreaming = false) {
            const chatBox = document.getElementById('chatBox');
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message ' + (sender === 'user' ? 'user-msg' : 'ai-msg');

            if (sender === 'user') {
                msgDiv.innerHTML = `
                    <div class="text">${escapeHtml(text)}</div>
                    <div class="user-avatar">üë§</div>
                `;
            } else {
                msgDiv.innerHTML = `
                    <div class="ai-avatar">ü¶ô</div>
                    <div class="text">${escapeHtml(text)}</div>
                `;
            }

            if (isStreaming) {
                msgDiv.id = 'streaming-msg';
            }

            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            return msgDiv;
        }

        function updateStreamingMessage(text) {
            const msg = document.getElementById('streaming-msg');
            if (msg) {
                const textDiv = msg.querySelector('.text');
                textDiv.textContent = text;
                document.getElementById('chatBox').scrollTop = document.getElementById('chatBox').scrollHeight;
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showTyping() {
            const chatBox = document.getElementById('chatBox');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-msg';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="ai-avatar">ü¶ô</div>
                <div class="text">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            chatBox.appendChild(typingDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function hideTyping() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }

        async function getLlamaResponse(userMessage) {
            try {
                // Build conversation for context
                const messages = [
                    { role: 'system', content: systemPrompt },
                    ...conversationHistory.slice(-6), // Keep last 6 messages for context
                    { role: 'user', content: userMessage }
                ];

                // Use Puter.js to call Llama (FREE, no API key!)
                const response = await puter.ai.chat(userMessage, {
                    model: 'meta-llama/llama-3.3-70b-instruct',
                    systemPrompt: systemPrompt
                });

                const aiResponse = response.message?.content || response;
                
                // Save to history
                conversationHistory.push({ role: 'user', content: userMessage });
                conversationHistory.push({ role: 'assistant', content: aiResponse });

                return aiResponse;
            } catch (error) {
                console.log('Puter.js error, using fallback:', error);
                return generateFallbackResponse(userMessage);
            }
        }

        // Fallback responses when API is unavailable
        function generateFallbackResponse(userMessage) {
            const lower = userMessage.toLowerCase();
            
            if (/project|game|build|code|portfolio/.test(lower)) {
                return "üéÆ Imrane has built 12+ projects including Snake, 2048, RPS AI with machine learning, Memory Match, Tic Tac Toe with unbeatable AI, ML Digit Classifier, and Godot games like Fragime (FPS) and Hamood (Platformer)! Check the Games section to play them!";
            }
            if (/skill|tech|language|stack/.test(lower)) {
                return "üíª Imrane's tech stack includes: JavaScript, Python, HTML5/CSS3, Canvas API, Godot Engine, TensorFlow.js, and Neural Networks. He specializes in game development and AI/ML implementations!";
            }
            if (/ai|machine learning|ml|neural|tensorflow/.test(lower)) {
                return "ü§ñ AI/ML is Imrane's passion! He built neural network trainers, a digit classifier that recognizes handwritten numbers, an RPS AI that learns your patterns, and TF-IDF chatbots. All running in the browser!";
            }
            if (/contact|email|hire|reach/.test(lower)) {
                return "üìß You can reach Imrane at imrane2015su@gmail.com for collaborations, opportunities, or just to say hi! He's always excited to discuss new projects.";
            }
            if (/hello|hi|hey|greetings/.test(lower)) {
                return "üëã Hello! I'm Llaga, Imrane's AI assistant powered by Llama! I can tell you about his projects, skills, games, or AI/ML work. What interests you?";
            }
            if (/godot|fragime|hamood/.test(lower)) {
                return "üéÆ Imrane has built games in Godot Engine! Fragime is an FPS game and Hamood is a platformer. Both showcase his game development skills with GDScript!";
            }
            if (/snake|2048|memory|reaction/.test(lower)) {
                return "üïπÔ∏è These are vanilla JavaScript games in the portfolio! Snake has smooth controls, 2048 has swipe support, Memory Match tests your memory, and Reaction Time measures your speed. Try them all!";
            }

            return "ü§î That's interesting! I'm best at answering questions about Imrane's projects, skills, games, and AI/ML work. What would you like to know about the portfolio?";
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const sendBtn = document.getElementById('sendBtn');
            const text = input.value.trim();

            if (!text || !chatReady) return;

            // Hide suggestions after first message
            document.getElementById('suggestions').style.display = 'none';

            addMessage('user', text);
            input.value = '';
            sendBtn.disabled = true;

            showTyping();

            try {
                const reply = await getLlamaResponse(text);
                hideTyping();
                addMessage('ai', reply);
            } catch (error) {
                hideTyping();
                addMessage('ai', generateFallbackResponse(text));
            }

            sendBtn.disabled = false;
            input.focus();
        }

        function askSuggestion(question) {
            document.getElementById('userInput').value = question;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                sendMessage();
            }
        }
    </script>
</body>
</html>
